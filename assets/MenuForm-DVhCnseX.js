var le=Object.defineProperty,te=Object.defineProperties;var oe=Object.getOwnPropertyDescriptors;var P=Object.getOwnPropertySymbols;var ne=Object.prototype.hasOwnProperty,ae=Object.prototype.propertyIsEnumerable;var R=(s,i,d)=>i in s?le(s,i,{enumerable:!0,configurable:!0,writable:!0,value:d}):s[i]=d,F=(s,i)=>{for(var d in i||(i={}))ne.call(i,d)&&R(s,d,i[d]);if(P)for(var d of P(i))ae.call(i,d)&&R(s,d,i[d]);return s},j=(s,i)=>te(s,oe(i));var B=(s,i,d)=>new Promise((g,v)=>{var w=p=>{try{t(d.next(p))}catch(f){v(f)}},E=p=>{try{t(d.throw(p))}catch(f){v(f)}},t=p=>p.done?g(p.value):Promise.resolve(p.value).then(w,E);t((d=d.apply(s,i)).next())});import{u as ue,_ as L,d as se,s as re,a as ie,b as de}from"../index.js";/* empty css                   *//* empty css                 *//* empty css                  *//* empty css                  *//* empty css                     *//* empty css                    */import{_ as me}from"./Home-CMPeNxFI.js";import{_ as pe}from"./Login-DMEpFD3K.js";import{_ as _e}from"./NotFound-BX07gxR_.js";import{_ as ce}from"./PackTable-BFLDinIa.js";import{_ as ve}from"./ceshi-CV568gOf.js";/* empty css                *//* empty css                      */import{n as fe,o as z,E as H,p as be,q as ge,c as A,r as ye,t as G,a as Ve,b as U,u as we,v as ke,w as xe,x as Me,y as Ce,z as Ee,A as he,B as Se,C as Ue}from"./elementplus-D2sT-qyg.js";import{v as K,c as O,r as S,x as J,M as l,K as o,y as c,B as k,a2 as V,P as D,J as y,G as C,w as Le,aa as $e,H as Fe}from"./vue-DRv-BlT3.js";import{_ as Be}from"./Permission-CeBfq6ZD.js";import{_ as Te}from"./RoleForm-Dq-UIqjY.js";import{_ as Ie}from"./index-A-TfDZUR.js";import{_ as Ne}from"./UserForm-B0m-ROuW.js";import{_ as qe}from"./index-HdgVVixQ.js";const Pe=Object.freeze(Object.defineProperty({__proto__:null,get default(){return Q}},Symbol.toStringTag,{value:"Module"})),Re={class:"menu-manage"},je={class:"m-b-[16px] flex justify-between"},Oe=K({name:"SystemMenu",__name:"index",setup(s){const i=ue(),d={directory:{label:"目录",tag:"info"},menu:{label:"菜单",tag:"success"},button:{label:"按钮",tag:"warning"}},g=O(()=>i.menus);console.log(g);const v=S(""),w=O(()=>{const m=v.value.toLowerCase().trim();if(!m)return g.value;const a=x=>x.map(n=>{const e=n.title.toLowerCase().includes(m)||n.path&&n.path.toLowerCase().includes(m),b=n.children?a(n.children):[];return e||b.length>0?j(F({},n),{children:b}):null}).filter(Boolean);return a(g.value)});function E(){var m;(m=f.value)==null||m.open()}function t(m){var a;(a=f.value)==null||a.open(m)}function p(m){Ve.confirm("确认删除该菜单？","提示",{type:"warning",cancelButtonText:"取消",confirmButtonText:"确认"}).then(()=>B(this,null,function*(){const a=yield se(m);U.success(a.message),i.getMenuList()})).catch(()=>{})}const f=S();function T(m){return B(this,null,function*(){var a,x;if(m.id)try{const n=yield ie(m);n.code===200&&(U.success(n.message),(a=f.value)==null||a.closeDialog(),i.getMenuList())}catch(n){}else try{const n=yield de(m);n.code===200?(U.success(n.message),(x=f.value)==null||x.closeDialog(),i.getMenuList()):U.error(n.error)}catch(n){console.log(n)}})}function I(m){return B(this,null,function*(){try{const a=yield re({id:m.id,visible:m.visible});a.code===200?(U.success(a.message),i.getMenuList()):U.error(a.error)}catch(a){console.log(a)}})}return(m,a)=>{const x=z,n=H,e=ge,b=A,_=ye,N=G,h=be,$=fe;return c(),J("div",Re,[l($,null,{default:o(()=>[k("div",je,[l(x,{modelValue:v.value,"onUpdate:modelValue":a[0]||(a[0]=r=>v.value=r),placeholder:"请输入菜单名称或路径",clearable:"",style:{width:"240px"}},null,8,["modelValue"]),l(n,{type:"primary",onClick:E},{default:o(()=>a[1]||(a[1]=[V("新增菜单")])),_:1,__:[1]})]),l(h,{data:w.value,"row-key":"id",border:"","default-expand-all":"",style:{width:"100%"},"tree-props":{children:"children"}},{default:o(()=>[l(e,{prop:"title",label:"菜单名称","min-width":"180"}),l(e,{label:"路径/按钮标识"},{default:o(({row:r})=>[V(D(r.type==="button"?r.code:r.path),1)]),_:1}),l(e,{label:"图标",width:"100"},{default:o(({row:r})=>[r.icon?(c(),y(b,{key:0},{default:o(()=>[l(L,{name:r.icon},null,8,["name"])]),_:2},1024)):C("",!0)]),_:1}),l(e,{prop:"type",label:"类型",width:"100"},{default:o(({row:r})=>[l(_,{type:d[r.type].tag},{default:o(()=>[V(D(d[r.type].label),1)]),_:2},1032,["type"])]),_:1}),l(e,{prop:"order",label:"排序",width:"80"}),l(e,{prop:"visible",label:"显示",width:"100"},{default:o(({row:r})=>[l(N,{modelValue:r.visible,"onUpdate:modelValue":M=>r.visible=M,disabled:r.type==="button"||r.disabled===!1,onChange:M=>I(r)},null,8,["modelValue","onUpdate:modelValue","disabled","onChange"])]),_:1}),l(e,{label:"操作",width:"180",fixed:"right"},{default:o(({row:r})=>[l(n,{type:"primary",size:"small",onClick:M=>t(r)},{default:o(()=>a[2]||(a[2]=[V("编辑")])),_:2,__:[2]},1032,["onClick"]),l(n,{type:"danger",size:"small",onClick:M=>p(r.id)},{default:o(()=>a[3]||(a[3]=[V("删除")])),_:2,__:[3]},1032,["onClick"])]),_:1})]),_:1},8,["data"])]),_:1}),l(Q,{ref_key:"formRef",ref:f,"menu-tree":g.value,onSubmitSuccess:T},null,8,["menu-tree"])])}}}),De=Object.freeze(Object.defineProperty({__proto__:null,default:Oe},Symbol.toStringTag,{value:"Module"})),ze=Object.assign({"/src/views/Home.vue":me,"/src/views/Login.vue":pe,"/src/views/NotFound.vue":_e,"/src/views/basic/PackTable.vue":ce,"/src/views/notebook/ceshi.vue":ve,"/src/views/system/menu/components/MenuForm.vue":Pe,"/src/views/system/menu/index.vue":De,"/src/views/system/role/components/Permission.vue":Be,"/src/views/system/role/components/RoleForm.vue":Te,"/src/views/system/role/index.vue":Ie,"/src/views/system/user/components/UserForm.vue":Ne,"/src/views/system/user/index.vue":qe});function He(){return Object.entries(ze).filter(([s])=>!s.includes("/components/")&&!s.includes("/utils/")&&!s.includes("Login")&&!s.includes("NotFound")).map(([s,i])=>{const d=s.replace(/^\/src\/views\//,""),g=i.default.name||Ae(d),v=Ge(d).toLocaleLowerCase();return{component:d,name:g,path:v}})}function Ae(s){return s.replace(/\.vue$/,"").split("/").join("-")}function Ge(s){return s.includes("Home")?"/":"/"+s.replace(/\.vue$/,"").replace(/\/index$/,"")}const Ke={class:"flex items-center"},Je={class:"flex items-center"},Qe={class:"flex items-center"},We={class:"flex items-center"},Q=K({__name:"MenuForm",props:{menuTree:{}},emits:["submitSuccess"],setup(s,{expose:i,emit:d}){const g=d,v=S(He()),w=S(!1),E=S(!1),t=S({id:0,title:"",name:"",component:"",path:"",type:"menu",icon:"",code:"",parentId:0,order:0,visible:!0}),p=S(),f={title:[{required:!0,message:"请输入菜单名称",trigger:"blur"}],parentId:[{required:!0,message:"请选择父级菜单",trigger:"change"}],name:[{required:!0,message:"请选择组件名称",trigger:"change"}],component:[{required:!0,message:"请输入组件目录",trigger:"blur"}],path:[{required:!0,message:"请输入路由路径",trigger:"blur"}],icon:[{required:!0,message:"请选择菜单图标",trigger:"change"}],code:[{required:!0,message:"请输入按钮标识",trigger:"blur"}],type:[{required:!0,message:"请选择菜单类型",trigger:"change"}]};Le(()=>t.value.type,n=>t.value.visible=n!=="button");function T(n){const e=v.value.find(b=>b.component===n);e&&(t.value.component=e.component,t.value.name=e.name,t.value.path=e.path)}function I(n){w.value=!0,n?(E.value=!0,t.value=F({},n)):(E.value=!1,t.value={id:0,title:"",name:"",component:"",path:"",type:"menu",icon:"",code:"",parentId:0,order:0,visible:!0})}function m(){w.value=!1}i({open:I,closeDialog:m});function a(){var n;(n=p.value)==null||n.resetFields()}function x(){var n;(n=p.value)==null||n.validate(e=>{e&&g("submitSuccess",F({},t.value))})}return(n,e)=>{const b=z,_=ke,N=xe,h=Ce,$=Me,r=A,M=he,W=Ee,X=Se,Y=G,Z=Ue,q=H,ee=we;return c(),y(ee,{modelValue:w.value,"onUpdate:modelValue":e[11]||(e[11]=u=>w.value=u),title:E.value?"编辑菜单":"新增菜单",width:"500px",onClose:a},{footer:o(()=>[l(q,{onClick:e[10]||(e[10]=u=>w.value=!1)},{default:o(()=>e[19]||(e[19]=[V("取消")])),_:1,__:[19]}),l(q,{type:"primary",onClick:x},{default:o(()=>e[20]||(e[20]=[V("提交")])),_:1,__:[20]})]),default:o(()=>[l(Z,{ref_key:"formRef",ref:p,model:t.value,rules:f,"label-width":"100px"},{default:o(()=>[l(_,{label:`${t.value.type==="button"?"按钮":t.value.type==="menu"?"菜单":"目录"}名称`,prop:"title"},{default:o(()=>[l(b,{modelValue:t.value.title,"onUpdate:modelValue":e[0]||(e[0]=u=>t.value.title=u),placeholder:`请输入${t.value.type==="button"?"按钮":t.value.type==="menu"?"菜单":"目录"}名称`},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),t.value.type==="menu"?(c(),y(_,{key:0,label:"父级菜单",prop:"parentId"},{default:o(()=>[l(N,{modelValue:t.value.parentId,"onUpdate:modelValue":e[1]||(e[1]=u=>t.value.parentId=u),options:n.menuTree,props:{label:"title",value:"id",children:"children",emitPath:!1,checkStrictly:!0},clearable:"",placeholder:"请选择父级菜单"},null,8,["modelValue","options"])]),_:1})):C("",!0),t.value.type==="menu"?(c(),y(_,{key:1,label:"组件",prop:"component"},{default:o(()=>[l($,{modelValue:t.value.component,"onUpdate:modelValue":e[2]||(e[2]=u=>t.value.component=u),filterable:"",placeholder:"请选择组件",onChange:T},{default:o(()=>[(c(!0),J(Fe,null,$e(v.value,u=>(c(),y(h,{key:u.component,label:u.component,value:u.component},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})):C("",!0),t.value.type==="menu"?(c(),y(_,{key:2,label:"组件名称",prop:"name"},{default:o(()=>[l(b,{modelValue:t.value.name,"onUpdate:modelValue":e[3]||(e[3]=u=>t.value.name=u),readonly:""},null,8,["modelValue"])]),_:1})):C("",!0),t.value.type!=="button"?(c(),y(_,{key:3,label:"路由地址",prop:"path"},{default:o(()=>[l(b,{modelValue:t.value.path,"onUpdate:modelValue":e[4]||(e[4]=u=>t.value.path=u),readonly:t.value.type==="menu",placeholder:"请输入路由地址"},null,8,["modelValue","readonly"])]),_:1})):C("",!0),t.value.type!=="button"?(c(),y(_,{key:4,label:"图标",prop:"icon"},{default:o(()=>[l($,{modelValue:t.value.icon,"onUpdate:modelValue":e[5]||(e[5]=u=>t.value.icon=u),clearable:"",placeholder:"请选择图标"},{default:o(()=>[l(h,{label:"设置",value:"Management"},{default:o(()=>[k("div",Ke,[l(r,null,{default:o(()=>[l(L,{name:"Management"})]),_:1}),e[12]||(e[12]=k("span",null,"设置",-1))])]),_:1}),l(h,{label:"菜单",value:"Menu"},{default:o(()=>[k("div",Je,[l(r,null,{default:o(()=>[l(L,{name:"Menu"})]),_:1}),e[13]||(e[13]=k("span",null,"菜单",-1))])]),_:1}),l(h,{label:"首页",value:"House"},{default:o(()=>[k("div",Qe,[l(r,null,{default:o(()=>[l(L,{name:"House"})]),_:1}),e[14]||(e[14]=k("span",null,"首页",-1))])]),_:1}),l(h,{label:"记事本",value:"Notebook"},{default:o(()=>[k("div",We,[l(r,null,{default:o(()=>[l(L,{name:"Notebook"})]),_:1}),e[15]||(e[15]=k("span",null,"记事本",-1))])]),_:1})]),_:1},8,["modelValue"])]),_:1})):C("",!0),t.value.type==="button"?(c(),y(_,{key:5,label:"按钮标识",prop:"code"},{default:o(()=>[l(b,{modelValue:t.value.code,"onUpdate:modelValue":e[6]||(e[6]=u=>t.value.code=u),placeholder:"请输入按钮标识，如：user:add"},null,8,["modelValue"])]),_:1})):C("",!0),l(_,{label:"类型",prop:"type"},{default:o(()=>[l(W,{modelValue:t.value.type,"onUpdate:modelValue":e[7]||(e[7]=u=>t.value.type=u)},{default:o(()=>[l(M,{value:"directory"},{default:o(()=>e[16]||(e[16]=[V("目录")])),_:1,__:[16]}),l(M,{value:"menu"},{default:o(()=>e[17]||(e[17]=[V("菜单")])),_:1,__:[17]}),l(M,{value:"button"},{default:o(()=>e[18]||(e[18]=[V("按钮")])),_:1,__:[18]})]),_:1},8,["modelValue"])]),_:1}),l(_,{label:"排序",prop:"order"},{default:o(()=>[l(X,{modelValue:t.value.order,"onUpdate:modelValue":e[8]||(e[8]=u=>t.value.order=u),min:0},null,8,["modelValue"])]),_:1}),t.value.type!=="button"?(c(),y(_,{key:6,label:"是否显示",prop:"visible"},{default:o(()=>[l(Y,{modelValue:t.value.visible,"onUpdate:modelValue":e[9]||(e[9]=u=>t.value.visible=u)},null,8,["modelValue"])]),_:1})):C("",!0)]),_:1},8,["model"])]),_:1},8,["modelValue","title"])}}});export{De as _,Pe as a};
