var y=(V,g,s)=>new Promise((c,m)=>{var p=o=>{try{u(s.next(o))}catch(_){m(_)}},i=o=>{try{u(s.throw(o))}catch(_){m(_)}},u=o=>o.done?c(o.value):Promise.resolve(o.value).then(p,i);u((s=s.apply(V,g)).next())});import{r as K,m as R,n as U}from"../index.js";/* empty css                *//* empty css                      *//* empty css                  *//* empty css                     *//* empty css                 *//* empty css                    *//* empty css                  */import{v as F,r,j as D,x as I,M as l,J as L,G as O,K as n,H as q,y as E,B as k,af as A,a2 as v}from"./vue-DRv-BlT3.js";import{_ as G}from"./RoleForm.vue_vue_type_script_setup_true_lang-Dc5qdGqM.js";import{P as H}from"./Permission-CeBfq6ZD.js";import{n as J,o as Q,E as W,p as X,q as Y,t as Z,N as ee,a as te,b as C}from"./elementplus-D2sT-qyg.js";const le={class:"flex justify-between items-center mb-4"},oe={class:"mt-4 flex justify-end"},x=10,ae=F({__name:"index",setup(V){const g=r([]),s=r(""),c=r(1),m=r(0),p=r(),i=r(!1),u=r(0),o=()=>y(this,null,function*(){const t=yield K(c.value,x,s.value);g.value=t.data,m.value=t.total}),_=t=>{c.value=t,o()},w=()=>{var t;(t=p.value)==null||t.open()},B=t=>{var e;(e=p.value)==null||e.open(t)},h=()=>{o()},S=t=>{u.value=t,i.value=!0},j=t=>{te.confirm(`确定删除角色 "${t.name}" 吗？`,"提示",{type:"warning",cancelButtonText:"取消",confirmButtonText:"确认"}).then(()=>y(this,null,function*(){const e=yield R({id:t.id});C.success(e.message),o()})).catch(()=>{})};function z(t){return y(this,null,function*(){try{const e=yield U({id:t.id,enabled:t.enabled});e.code===200?C.success(e.message):C.error(e.error)}catch(e){console.log(e)}})}return D(o),(t,e)=>{const P=Q,f=W,d=Y,T=Z,$=X,M=ee,N=J;return E(),I(q,null,[l(N,null,{default:n(()=>[k("div",le,[l(P,{modelValue:s.value,"onUpdate:modelValue":e[0]||(e[0]=a=>s.value=a),placeholder:"请输入角色名称",clearable:"",onKeyup:A(o,["enter"])},null,8,["modelValue"]),l(f,{type:"primary",onClick:o},{default:n(()=>e[2]||(e[2]=[v("搜索")])),_:1,__:[2]}),l(f,{type:"primary",onClick:w},{default:n(()=>e[3]||(e[3]=[v("新增角色")])),_:1,__:[3]})]),l($,{data:g.value,stripe:"",border:"",style:{width:"100%"}},{default:n(()=>[l(d,{type:"index",label:"#",width:"60"}),l(d,{prop:"name",label:"角色名称"}),l(d,{prop:"code",label:"角色编码"}),l(d,{prop:"description",label:"角色描述"}),l(d,{prop:"visible",label:"是否启用",width:"100"},{default:n(({row:a})=>[l(T,{modelValue:a.enabled,"onUpdate:modelValue":b=>a.enabled=b,onChange:b=>z(a)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),_:1}),l(d,{label:"操作",width:"240"},{default:n(({row:a})=>[l(f,{size:"small",type:"primary",onClick:b=>B(a)},{default:n(()=>e[4]||(e[4]=[v("编辑")])),_:2,__:[4]},1032,["onClick"]),l(f,{size:"small",onClick:b=>S(a.id)},{default:n(()=>e[5]||(e[5]=[v("分配权限")])),_:2,__:[5]},1032,["onClick"]),l(f,{size:"small",type:"danger",onClick:b=>j(a)},{default:n(()=>e[6]||(e[6]=[v("删除")])),_:2,__:[6]},1032,["onClick"])]),_:1})]),_:1},8,["data"]),k("div",oe,[l(M,{layout:"prev, pager, next, jumper",total:m.value,"page-size":x,"current-page":c.value,onCurrentChange:_},null,8,["total","current-page"])])]),_:1}),l(G,{ref_key:"roleFormRef",ref:p,onSuccess:h},null,512),i.value?(E(),L(H,{key:0,modelValue:i.value,"onUpdate:modelValue":e[1]||(e[1]=a=>i.value=a),"role-id":u.value},null,8,["modelValue","role-id"])):O("",!0)],64)}}}),ge=Object.freeze(Object.defineProperty({__proto__:null,default:ae},Symbol.toStringTag,{value:"Module"}));export{ge as _};
