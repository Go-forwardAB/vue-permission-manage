var y=(h,g,s)=>new Promise((d,m)=>{var p=l=>{try{i(s.next(l))}catch(_){m(_)}},c=l=>{try{i(s.throw(l))}catch(_){m(_)}},i=l=>l.done?d(l.value):Promise.resolve(l.value).then(p,c);i((s=s.apply(h,g)).next())});import{r as N,m as O,n as R}from"../index.js";/* empty css                *//* empty css                      *//* empty css                  *//* empty css                     *//* empty css                 *//* empty css                    *//* empty css                  */import{x as U,r,k as F,y as V,z as L,P as t,H as n,A as k,a5 as A,L as v,G as D,K as I,O as G}from"./vue-D-ZuiWlZ.js";import{_ as H}from"./RoleForm.vue_vue_type_script_setup_true_lang-BZ6RbnJk.js";import{P as q}from"./Permission-wphZQAnl.js";import{a as J,b as C,o as Q,E as W,p as X,r as Y,t as Z,O as ee,u as te}from"./elementplus-zf-Affb6.js";const ae={class:"flex justify-between items-center mb-4"},le={class:"mt-4 flex justify-end"},E=10,oe=U({__name:"index",setup(h){const g=r([]),s=r(""),d=r(1),m=r(0),p=r(),c=r(!1),i=r(0),l=()=>y(this,null,function*(){const e=yield N(d.value,E,s.value);g.value=e.data,m.value=e.total}),_=e=>{d.value=e,l()},x=()=>{var e;(e=p.value)==null||e.open()},w=e=>{var a;(a=p.value)==null||a.open(e)},B=()=>{l()},z=e=>{i.value=e,c.value=!0},P=e=>{J.confirm(`确定删除角色 "${e.name}" 吗？`,"提示",{type:"warning",cancelButtonText:"取消",confirmButtonText:"确认"}).then(()=>y(this,null,function*(){const a=yield O({id:e.id});C.success(a.message),l()})).catch(()=>{})};function S(e){return y(this,null,function*(){try{const a=yield R({id:e.id,enabled:e.enabled});a.code===200?C.success(a.message):C.error(a.error)}catch(a){console.log(a)}})}return F(l),(e,a)=>{const T=Q,f=W,u=X,$=Y,j=Z,K=ee,M=te;return V(),L(G,null,[t(M,null,{default:n(()=>[k("div",ae,[t(T,{modelValue:s.value,"onUpdate:modelValue":a[0]||(a[0]=o=>s.value=o),placeholder:"请输入角色名称",clearable:"",onKeyup:A(l,["enter"])},null,8,["modelValue"]),t(f,{type:"primary",onClick:l},{default:n(()=>[v("搜索")]),_:1}),t(f,{type:"primary",onClick:x},{default:n(()=>[v("新增角色")]),_:1})]),t(j,{data:g.value,stripe:"",border:"",style:{width:"100%"}},{default:n(()=>[t(u,{type:"index",label:"#",width:"60"}),t(u,{prop:"name",label:"角色名称"}),t(u,{prop:"code",label:"角色编码"}),t(u,{prop:"description",label:"角色描述"}),t(u,{prop:"visible",label:"是否启用",width:"100"},{default:n(({row:o})=>[t($,{modelValue:o.enabled,"onUpdate:modelValue":b=>o.enabled=b,onChange:b=>S(o)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),_:1}),t(u,{label:"操作",width:"240"},{default:n(({row:o})=>[t(f,{size:"small",type:"primary",onClick:b=>w(o)},{default:n(()=>[v("编辑")]),_:2},1032,["onClick"]),t(f,{size:"small",onClick:b=>z(o.id)},{default:n(()=>[v("分配权限")]),_:2},1032,["onClick"]),t(f,{size:"small",type:"danger",onClick:b=>P(o)},{default:n(()=>[v("删除")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"]),k("div",le,[t(K,{layout:"prev, pager, next, jumper",total:m.value,"page-size":E,"current-page":d.value,onCurrentChange:_},null,8,["total","current-page"])])]),_:1}),t(H,{ref_key:"roleFormRef",ref:p,onSuccess:B},null,512),c.value?(V(),D(q,{key:0,modelValue:c.value,"onUpdate:modelValue":a[1]||(a[1]=o=>c.value=o),"role-id":i.value},null,8,["modelValue","role-id"])):I("",!0)],64)}}}),ge=Object.freeze(Object.defineProperty({__proto__:null,default:oe},Symbol.toStringTag,{value:"Module"}));export{ge as _};
