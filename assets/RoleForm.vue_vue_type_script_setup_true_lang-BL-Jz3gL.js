var g=(v,f,d)=>new Promise((r,u)=>{var m=a=>{try{i(d.next(a))}catch(p){u(p)}},l=a=>{try{i(d.throw(a))}catch(p){u(p)}},i=a=>a.done?r(a.value):Promise.resolve(a.value).then(m,l);i((d=d.apply(v,f)).next())});import{t as F}from"../index.js";/* empty css                   *//* empty css                 *//* empty css                  */import{v as B,w as R,o as S,t as j,E as q,D,b as w}from"./elementplus-C7q1zps1.js";import{x as I,r as b,X as N,G as O,z,H as n,P as o,L as x}from"./vue-Bz1rze_z.js";const $=I({__name:"RoleForm",emits:["success"],setup(v,{expose:f,emit:d}){const r=b(!1),u=b(!1),m=b(),l=N({name:"",code:"",description:"",enabled:!0}),i={name:[{required:!0,message:"请输入角色名称",trigger:"blur"}],code:[{required:!0,message:"请输入角色编码",trigger:"blur"}]},a=d;function p(s){s?(u.value=!0,Object.assign(l,s)):(u.value=!1,Object.assign(l,{name:"",code:"",description:"",enabled:!0}),delete l.id),r.value=!0}function E(){var s;(s=m.value)==null||s.resetFields(),r.value=!1}function y(){return g(this,null,function*(){var s;try{yield(s=m.value)==null?void 0:s.validate();const e=yield F(l);e.code===200?(w.success(e.message),r.value=!1,a("success")):w.error(e.error)}catch(e){console.log(e)}})}return f({open:p}),(s,e)=>{const _=S,c=R,C=j,k=B,V=q,U=D;return z(),O(U,{modelValue:r.value,"onUpdate:modelValue":e[5]||(e[5]=t=>r.value=t),title:u.value?"编辑角色":"新增角色",width:"500px",onClose:E},{footer:n(()=>[o(V,{onClick:e[4]||(e[4]=t=>r.value=!1)},{default:n(()=>[x("取消")]),_:1}),o(V,{type:"primary",onClick:y},{default:n(()=>[x("保存")]),_:1})]),default:n(()=>[o(k,{ref_key:"formRef",ref:m,model:l,rules:i,"label-width":"100px"},{default:n(()=>[o(c,{label:"角色名称",prop:"name"},{default:n(()=>[o(_,{modelValue:l.name,"onUpdate:modelValue":e[0]||(e[0]=t=>l.name=t),placeholder:"请输入角色名称"},null,8,["modelValue"])]),_:1}),o(c,{label:"角色编码",prop:"code"},{default:n(()=>[o(_,{modelValue:l.code,"onUpdate:modelValue":e[1]||(e[1]=t=>l.code=t),placeholder:"请输入角色编码，如：admin"},null,8,["modelValue"])]),_:1}),o(c,{label:"描述",prop:"description"},{default:n(()=>[o(_,{modelValue:l.description,"onUpdate:modelValue":e[2]||(e[2]=t=>l.description=t),type:"textarea",rows:3},null,8,["modelValue"])]),_:1}),o(c,{label:"是否启用",prop:"enabled"},{default:n(()=>[o(C,{modelValue:l.enabled,"onUpdate:modelValue":e[3]||(e[3]=t=>l.enabled=t)},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"])}}});export{$ as _};
