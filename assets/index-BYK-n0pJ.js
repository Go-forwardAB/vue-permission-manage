var y=(h,g,s)=>new Promise((d,m)=>{var p=l=>{try{i(s.next(l))}catch(_){m(_)}},c=l=>{try{i(s.throw(l))}catch(_){m(_)}},i=l=>l.done?d(l.value):Promise.resolve(l.value).then(p,c);i((s=s.apply(h,g)).next())});import{r as O,m as R,n as U}from"../index.js";/* empty css                *//* empty css                      *//* empty css                  *//* empty css                     *//* empty css                 *//* empty css                    *//* empty css                  */import{x as F,r,j as K,y as L,z as V,P as t,G as A,J as D,H as n,A as E,a4 as I,L as v,O as q}from"./vue-Bz1rze_z.js";import{_ as G}from"./RoleForm.vue_vue_type_script_setup_true_lang-BL-Jz3gL.js";import{P as H}from"./Permission-Bq0Q1EwU.js";import{o as J,E as Q,p as W,q as X,t as Y,O as Z,u as ee,a as te,b as C}from"./elementplus-C7q1zps1.js";const ae={class:"flex justify-between items-center mb-4"},le={class:"mt-4 flex justify-end"},k=10,oe=F({__name:"index",setup(h){const g=r([]),s=r(""),d=r(1),m=r(0),p=r(),c=r(!1),i=r(0),l=()=>y(this,null,function*(){const e=yield O(d.value,k,s.value);g.value=e.data,m.value=e.total}),_=e=>{d.value=e,l()},x=()=>{var e;(e=p.value)==null||e.open()},w=e=>{var a;(a=p.value)==null||a.open(e)},B=()=>{l()},z=e=>{i.value=e,c.value=!0},P=e=>{te.confirm(`确定删除角色 "${e.name}" 吗？`,"提示",{type:"warning",cancelButtonText:"取消",confirmButtonText:"确认"}).then(()=>y(this,null,function*(){const a=yield R({id:e.id});C.success(a.message),l()})).catch(()=>{})};function S(e){return y(this,null,function*(){try{const a=yield U({id:e.id,enabled:e.enabled});a.code===200?C.success(a.message):C.error(a.error)}catch(a){console.log(a)}})}return K(l),(e,a)=>{const j=J,f=Q,u=X,T=Y,$=W,M=Z,N=ee;return V(),L(q,null,[t(N,null,{default:n(()=>[E("div",ae,[t(j,{modelValue:s.value,"onUpdate:modelValue":a[0]||(a[0]=o=>s.value=o),placeholder:"请输入角色名称",clearable:"",onKeyup:I(l,["enter"])},null,8,["modelValue"]),t(f,{type:"primary",onClick:l},{default:n(()=>[v("搜索")]),_:1}),t(f,{type:"primary",onClick:x},{default:n(()=>[v("新增角色")]),_:1})]),t($,{data:g.value,stripe:"",border:"",style:{width:"100%"}},{default:n(()=>[t(u,{type:"index",label:"#",width:"60"}),t(u,{prop:"name",label:"角色名称"}),t(u,{prop:"code",label:"角色编码"}),t(u,{prop:"description",label:"角色描述"}),t(u,{prop:"visible",label:"是否启用",width:"100"},{default:n(({row:o})=>[t(T,{modelValue:o.enabled,"onUpdate:modelValue":b=>o.enabled=b,onChange:b=>S(o)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),_:1}),t(u,{label:"操作",width:"240"},{default:n(({row:o})=>[t(f,{size:"small",type:"primary",onClick:b=>w(o)},{default:n(()=>[v("编辑")]),_:2},1032,["onClick"]),t(f,{size:"small",onClick:b=>z(o.id)},{default:n(()=>[v("分配权限")]),_:2},1032,["onClick"]),t(f,{size:"small",type:"danger",onClick:b=>P(o)},{default:n(()=>[v("删除")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"]),E("div",le,[t(M,{layout:"prev, pager, next, jumper",total:m.value,"page-size":k,"current-page":d.value,onCurrentChange:_},null,8,["total","current-page"])])]),_:1}),t(G,{ref_key:"roleFormRef",ref:p,onSuccess:B},null,512),c.value?(V(),A(H,{key:0,modelValue:c.value,"onUpdate:modelValue":a[1]||(a[1]=o=>c.value=o),"role-id":i.value},null,8,["modelValue","role-id"])):D("",!0)],64)}}}),ge=Object.freeze(Object.defineProperty({__proto__:null,default:oe},Symbol.toStringTag,{value:"Module"}));export{ge as _};
