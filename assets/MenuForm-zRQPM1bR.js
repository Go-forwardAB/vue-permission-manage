var le=Object.defineProperty,te=Object.defineProperties;var oe=Object.getOwnPropertyDescriptors;var O=Object.getOwnPropertySymbols;var ne=Object.prototype.hasOwnProperty,ae=Object.prototype.propertyIsEnumerable;var P=(u,r,i)=>r in u?le(u,r,{enumerable:!0,configurable:!0,writable:!0,value:i}):u[r]=i,F=(u,r)=>{for(var i in r||(r={}))ne.call(r,i)&&P(u,i,r[i]);if(O)for(var i of O(r))ae.call(r,i)&&P(u,i,r[i]);return u},R=(u,r)=>te(u,oe(r));var T=(u,r,i)=>new Promise((g,v)=>{var V=c=>{try{l(i.next(c))}catch(f){v(f)}},C=c=>{try{l(i.throw(c))}catch(f){v(f)}},l=c=>c.done?g(c.value):Promise.resolve(c.value).then(V,C);l((i=i.apply(u,r)).next())});import{u as ue,_ as U,d as se,a as re,b as ie,s as de}from"../index.js";/* empty css                   *//* empty css                 *//* empty css                  *//* empty css                  *//* empty css                     *//* empty css                    */import{_ as me}from"./Home-B4F3k2-Q.js";import{_ as ce}from"./Login-ByiPQqY-.js";import{_ as pe}from"./NotFound-C57gmiiS.js";import{_ as _e}from"./PackTable-CrBNEP5c.js";import{_ as ve}from"./ceshi-4fJicWsJ.js";/* empty css                *//* empty css                      */import{a as fe,b as L,o as z,E as H,p as be,c as A,q as ge,r as G,t as ye,u as he,v as Ve,w as we,x as ke,y as xe,z as Me,A as Ce,B as Ee,C as Se,D as Le}from"./elementplus-zf-Affb6.js";import{x as K,c as j,r as S,y as _,z as J,P as e,H as o,A as w,L as h,M as D,G as y,K as M,h as Ue,a4 as $e,O as Fe}from"./vue-D-ZuiWlZ.js";import{_ as Te}from"./Permission-wphZQAnl.js";import{_ as Be}from"./RoleForm-Cxhl9LEa.js";import{_ as Ie}from"./index-B7sbs5kV.js";import{_ as Ne}from"./UserForm-Djy7lsDo.js";import{_ as qe}from"./index-zVrUmKoI.js";const Oe=Object.freeze(Object.defineProperty({__proto__:null,get default(){return Q}},Symbol.toStringTag,{value:"Module"})),Pe={class:"menu-manage"},Re={class:"m-b-[16px] flex justify-between"},je=K({name:"SystemMenu",__name:"index",setup(u){const r=ue(),i={directory:{label:"目录",tag:"info"},menu:{label:"菜单",tag:"success"},button:{label:"按钮",tag:"warning"}},g=j(()=>r.menus);console.log(g);const v=S(""),V=j(()=>{const m=v.value.toLowerCase().trim();if(!m)return g.value;const d=k=>k.map(n=>{const t=n.title.toLowerCase().includes(m)||n.path&&n.path.toLowerCase().includes(m),b=n.children?d(n.children):[];return t||b.length>0?R(F({},n),{children:b}):null}).filter(Boolean);return d(g.value)});function C(){var m;(m=f.value)==null||m.open()}function l(m){var d;(d=f.value)==null||d.open(m)}function c(m){fe.confirm("确认删除该菜单？","提示",{type:"warning",cancelButtonText:"取消",confirmButtonText:"确认"}).then(()=>T(this,null,function*(){const d=yield se(m);L.success(d.message),r.getMenuList()})).catch(()=>{})}const f=S();function B(m){return T(this,null,function*(){var d,k;if(m.id)try{const n=yield re(m);n.code===200&&(L.success(n.message),(d=f.value)==null||d.closeDialog(),r.getMenuList())}catch(n){}else try{const n=yield ie(m);n.code===200?(L.success(n.message),(k=f.value)==null||k.closeDialog(),r.getMenuList()):L.error(n.error)}catch(n){console.log(n)}})}function I(m){return T(this,null,function*(){try{const d=yield de({id:m.id,visible:m.visible});d.code===200?(L.success(d.message),r.getMenuList()):L.error(d.error)}catch(d){console.log(d)}})}return(m,d)=>{const k=z,n=H,t=be,b=A,p=ge,N=G,E=ye,$=he;return _(),J("div",Pe,[e($,null,{default:o(()=>[w("div",Re,[e(k,{modelValue:v.value,"onUpdate:modelValue":d[0]||(d[0]=s=>v.value=s),placeholder:"请输入菜单名称或路径",clearable:"",style:{width:"240px"}},null,8,["modelValue"]),e(n,{type:"primary",onClick:C},{default:o(()=>[h("新增菜单")]),_:1})]),e(E,{data:V.value,"row-key":"id",border:"","default-expand-all":"",style:{width:"100%"},"tree-props":{children:"children"}},{default:o(()=>[e(t,{prop:"title",label:"菜单名称","min-width":"180"}),e(t,{label:"路径/按钮标识"},{default:o(({row:s})=>[h(D(s.type==="button"?s.code:s.path),1)]),_:1}),e(t,{label:"图标",width:"100"},{default:o(({row:s})=>[s.icon?(_(),y(b,{key:0},{default:o(()=>[e(U,{name:s.icon},null,8,["name"])]),_:2},1024)):M("",!0)]),_:1}),e(t,{prop:"type",label:"类型",width:"100"},{default:o(({row:s})=>[e(p,{type:i[s.type].tag},{default:o(()=>[h(D(i[s.type].label),1)]),_:2},1032,["type"])]),_:1}),e(t,{prop:"order",label:"排序",width:"80"}),e(t,{prop:"visible",label:"显示",width:"100"},{default:o(({row:s})=>[e(N,{modelValue:s.visible,"onUpdate:modelValue":x=>s.visible=x,disabled:s.type==="button"||s.disabled===!1,onChange:x=>I(s)},null,8,["modelValue","onUpdate:modelValue","disabled","onChange"])]),_:1}),e(t,{label:"操作",width:"180",fixed:"right"},{default:o(({row:s})=>[e(n,{type:"primary",size:"small",onClick:x=>l(s)},{default:o(()=>[h("编辑")]),_:2},1032,["onClick"]),e(n,{type:"danger",size:"small",onClick:x=>c(s.id)},{default:o(()=>[h("删除")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])]),_:1}),e(Q,{ref_key:"formRef",ref:f,"menu-tree":g.value,onSubmitSuccess:B},null,8,["menu-tree"])])}}}),De=Object.freeze(Object.defineProperty({__proto__:null,default:je},Symbol.toStringTag,{value:"Module"})),ze=Object.assign({"/src/views/Home.vue":me,"/src/views/Login.vue":ce,"/src/views/NotFound.vue":pe,"/src/views/basic/PackTable.vue":_e,"/src/views/notebook/ceshi.vue":ve,"/src/views/system/menu/components/MenuForm.vue":Oe,"/src/views/system/menu/index.vue":De,"/src/views/system/role/components/Permission.vue":Te,"/src/views/system/role/components/RoleForm.vue":Be,"/src/views/system/role/index.vue":Ie,"/src/views/system/user/components/UserForm.vue":Ne,"/src/views/system/user/index.vue":qe});function He(){return Object.entries(ze).filter(([u])=>!u.includes("/components/")&&!u.includes("/utils/")&&!u.includes("Login")&&!u.includes("NotFound")).map(([u,r])=>{const i=u.replace(/^\/src\/views\//,""),g=r.default.name||Ae(i),v=Ge(i).toLocaleLowerCase();return{component:i,name:g,path:v}})}function Ae(u){return u.replace(/\.vue$/,"").split("/").join("-")}function Ge(u){return u.includes("Home")?"/":"/"+u.replace(/\.vue$/,"").replace(/\/index$/,"")}const Ke={class:"flex items-center"},Je=w("span",null,"设置",-1),Qe={class:"flex items-center"},We=w("span",null,"菜单",-1),Xe={class:"flex items-center"},Ye=w("span",null,"首页",-1),Ze={class:"flex items-center"},el=w("span",null,"记事本",-1),Q=K({__name:"MenuForm",props:{menuTree:{}},emits:["submitSuccess"],setup(u,{expose:r,emit:i}){const g=i,v=S(He()),V=S(!1),C=S(!1),l=S({id:0,title:"",name:"",component:"",path:"",type:"menu",icon:"",code:"",parentId:0,order:0,visible:!0}),c=S(),f={title:[{required:!0,message:"请输入菜单名称",trigger:"blur"}],parentId:[{required:!0,message:"请选择父级菜单",trigger:"change"}],name:[{required:!0,message:"请选择组件名称",trigger:"change"}],component:[{required:!0,message:"请输入组件目录",trigger:"blur"}],path:[{required:!0,message:"请输入路由路径",trigger:"blur"}],icon:[{required:!0,message:"请选择菜单图标",trigger:"change"}],code:[{required:!0,message:"请输入按钮标识",trigger:"blur"}],type:[{required:!0,message:"请选择菜单类型",trigger:"change"}]};Ue(()=>l.value.type,n=>l.value.visible=n!=="button");function B(n){const t=v.value.find(b=>b.component===n);t&&(l.value.component=t.component,l.value.name=t.name,l.value.path=t.path)}function I(n){V.value=!0,n?(C.value=!0,l.value=F({},n)):(C.value=!1,l.value={id:0,title:"",name:"",component:"",path:"",type:"menu",icon:"",code:"",parentId:0,order:0,visible:!0})}function m(){V.value=!1}r({open:I,closeDialog:m});function d(){var n;(n=c.value)==null||n.resetFields()}function k(){var n;(n=c.value)==null||n.validate(t=>{t&&g("submitSuccess",F({},l.value))})}return(n,t)=>{const b=z,p=Ve,N=we,E=ke,$=xe,s=A,x=Me,W=Ce,X=Ee,Y=G,Z=Se,q=H,ee=Le;return _(),y(ee,{modelValue:V.value,"onUpdate:modelValue":t[11]||(t[11]=a=>V.value=a),title:C.value?"编辑菜单":"新增菜单",width:"500px",onClose:d},{footer:o(()=>[e(q,{onClick:t[10]||(t[10]=a=>V.value=!1)},{default:o(()=>[h("取消")]),_:1}),e(q,{type:"primary",onClick:k},{default:o(()=>[h("提交")]),_:1})]),default:o(()=>[e(Z,{ref_key:"formRef",ref:c,model:l.value,rules:f,"label-width":"100px"},{default:o(()=>[e(p,{label:`${l.value.type==="button"?"按钮":l.value.type==="menu"?"菜单":"目录"}名称`,prop:"title"},{default:o(()=>[e(b,{modelValue:l.value.title,"onUpdate:modelValue":t[0]||(t[0]=a=>l.value.title=a),placeholder:`请输入${l.value.type==="button"?"按钮":l.value.type==="menu"?"菜单":"目录"}名称`},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),l.value.type==="menu"?(_(),y(p,{key:0,label:"父级菜单",prop:"parentId"},{default:o(()=>[e(N,{modelValue:l.value.parentId,"onUpdate:modelValue":t[1]||(t[1]=a=>l.value.parentId=a),options:n.menuTree,props:{label:"title",value:"id",children:"children",emitPath:!1,checkStrictly:!0},clearable:"",placeholder:"请选择父级菜单"},null,8,["modelValue","options"])]),_:1})):M("",!0),l.value.type==="menu"?(_(),y(p,{key:1,label:"组件",prop:"component"},{default:o(()=>[e($,{modelValue:l.value.component,"onUpdate:modelValue":t[2]||(t[2]=a=>l.value.component=a),filterable:"",placeholder:"请选择组件",onChange:B},{default:o(()=>[(_(!0),J(Fe,null,$e(v.value,a=>(_(),y(E,{key:a.component,label:a.component,value:a.component},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})):M("",!0),l.value.type==="menu"?(_(),y(p,{key:2,label:"组件名称",prop:"name"},{default:o(()=>[e(b,{modelValue:l.value.name,"onUpdate:modelValue":t[3]||(t[3]=a=>l.value.name=a),readonly:""},null,8,["modelValue"])]),_:1})):M("",!0),l.value.type!=="button"?(_(),y(p,{key:3,label:"路由地址",prop:"path"},{default:o(()=>[e(b,{modelValue:l.value.path,"onUpdate:modelValue":t[4]||(t[4]=a=>l.value.path=a),readonly:l.value.type==="menu",placeholder:"请输入路由地址"},null,8,["modelValue","readonly"])]),_:1})):M("",!0),l.value.type!=="button"?(_(),y(p,{key:4,label:"图标",prop:"icon"},{default:o(()=>[e($,{modelValue:l.value.icon,"onUpdate:modelValue":t[5]||(t[5]=a=>l.value.icon=a),clearable:"",placeholder:"请选择图标"},{default:o(()=>[e(E,{label:"设置",value:"Management"},{default:o(()=>[w("div",Ke,[e(s,null,{default:o(()=>[e(U,{name:"Management"})]),_:1}),Je])]),_:1}),e(E,{label:"菜单",value:"Menu"},{default:o(()=>[w("div",Qe,[e(s,null,{default:o(()=>[e(U,{name:"Menu"})]),_:1}),We])]),_:1}),e(E,{label:"首页",value:"House"},{default:o(()=>[w("div",Xe,[e(s,null,{default:o(()=>[e(U,{name:"House"})]),_:1}),Ye])]),_:1}),e(E,{label:"记事本",value:"Notebook"},{default:o(()=>[w("div",Ze,[e(s,null,{default:o(()=>[e(U,{name:"Notebook"})]),_:1}),el])]),_:1})]),_:1},8,["modelValue"])]),_:1})):M("",!0),l.value.type==="button"?(_(),y(p,{key:5,label:"按钮标识",prop:"code"},{default:o(()=>[e(b,{modelValue:l.value.code,"onUpdate:modelValue":t[6]||(t[6]=a=>l.value.code=a),placeholder:"请输入按钮标识，如：user:add"},null,8,["modelValue"])]),_:1})):M("",!0),e(p,{label:"类型",prop:"type"},{default:o(()=>[e(W,{modelValue:l.value.type,"onUpdate:modelValue":t[7]||(t[7]=a=>l.value.type=a)},{default:o(()=>[e(x,{value:"directory"},{default:o(()=>[h("目录")]),_:1}),e(x,{value:"menu"},{default:o(()=>[h("菜单")]),_:1}),e(x,{value:"button"},{default:o(()=>[h("按钮")]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(p,{label:"排序",prop:"order"},{default:o(()=>[e(X,{modelValue:l.value.order,"onUpdate:modelValue":t[8]||(t[8]=a=>l.value.order=a),min:0},null,8,["modelValue"])]),_:1}),l.value.type!=="button"?(_(),y(p,{key:6,label:"是否显示",prop:"visible"},{default:o(()=>[e(Y,{modelValue:l.value.visible,"onUpdate:modelValue":t[9]||(t[9]=a=>l.value.visible=a)},null,8,["modelValue"])]),_:1})):M("",!0)]),_:1},8,["model"])]),_:1},8,["modelValue","title"])}}});export{De as _,Oe as a};
